---
title: node_modules .bin 目录哪里来的
date: 2020-09-09
#sidebar: 'auto'
categories:
  - Note
tags:
  - npm
#keys:
#  - 'vue'
#publish: true
---

你应用的 package.json 一般是这样的：

```json
{
  "name": "my-app",
  "devDependencies": {
    "mocha": "^6"
  },
  "scripts": {
    "test": "mocha test/**.test.js"
  }
}
```

然后通过 npm test 即可调用 mocha 执行单测。

## scripts 里面配置的 mocha 是哪来的呢？

答：通过 npm 启动的脚本，会默认把 node_modules/.bin 加到 PATH 环境变量中。

[具体文档](https://docs.npmjs.com/cli/run-script)

## node_modules/.bin/mocha 是哪来的？

答：当某个模块配置了 bin 定义时，就会被安装的时候，自动软链了过去。
如 mocha 源码 配置了：

```json
{
  "name": "mocha",
  "bin": {
    "mocha": "./bin/mocha"
  }
}
```

[具体的文档](https://docs.npmjs.com/files/package.json)

参考：[npm scripts 使用指南 - 阮一峰的网络日志 ](http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html)
